import{j as e,u as R,r as h,p as S}from"./index-BiH_W8qU.js";import{M as k}from"./Modal-DI8yWc2a.js";import{H as j}from"./index-G0GgqibQ.js";var i=(t=>(t[t.NO_RATING=0]="NO_RATING",t[t.DISSATISFIED=1]="DISSATISFIED",t[t.NEUTRAL=2]="NEUTRAL",t[t.SATISFIED=3]="SATISFIED",t))(i||{});const E=({label:t,placeholder:r,maxlength:d,onChange:m,className:x,value:a})=>e.jsxs("div",{children:[e.jsx("label",{className:"left",htmlFor:t,children:t}),e.jsx("textarea",{className:x,name:t,id:t,value:a,placeholder:r,maxLength:d,onChange:m})]}),T="/etc/designs/spa/snb-dlr-fe/clientlibs/",o=({src:t,alt:r})=>e.jsx("img",{src:T+t,alt:r}),F=({isFeedbackModalOpen:t,setIsFeedbackModalOpen:r,setFeedbackModalSuccess:d,transactionId:m,isOnPage:x=""})=>{const{t:a}=R(["feedbackModal"]),[p,v]=h.useState(0),[g,f]=h.useState(!1),[n,u]=h.useState({comment:"",reaction:i.NO_RATING});h.useEffect(()=>{const s=async l=>{l.key==="Escape"&&await y()};return t&&window.addEventListener("keydown",l=>{s(l)}),()=>{window.removeEventListener("keydown",l=>{s(l)})}},[t]);const I=s=>{s.target.value?f(!0):f(!1),v(s.target.value.length),u({...n,comment:s.target.value})},y=async()=>{r(!1);try{await j.submitFeedback(m,{feedbackSkipped:!0,feedbackComments:"",feedbackRating:i.NO_RATING})}catch(s){console.error(s)}},c=s=>{s&&f(!0),u({...n,reaction:s})},N=async()=>{if(d(!1),g){try{await j.submitFeedback(m,{feedbackSkipped:!1,feedbackRating:n.reaction,feedbackComments:n.comment})}catch(l){console.error(l)}d(!0);const s=setInterval(()=>{d(!1),clearInterval(s)},S);window.scrollTo({top:0,behavior:"smooth"})}r(!1),r(!1),u({reaction:i.NO_RATING,comment:""}),f(!1)};return e.jsx(e.Fragment,{children:e.jsx(k,{id:"feedbackModal",title:a("title"),primaryBtnProps:{label:a("primaryButton"),onClick:()=>{N()},disabled:n.reaction===i.NO_RATING},linkBtnProps:{label:a("tertiaryButton"),onClick:y},hasLinkBtn:!0,hasFooter:!0,open:t,onClose:y,children:e.jsxs("form",{children:[e.jsxs("p",{children:[a(x==="retrieval"?"description-retrieval":"description"),e.jsx("span",{className:"required",children:"*"}),e.jsx("span",{className:"sr-only",children:a("required")})]}),e.jsxs("fieldset",{className:"feedback-fieldset",children:[e.jsx("legend",{className:"sr-only",children:a("description")}),e.jsxs("div",{className:"img-section",children:[e.jsxs("div",{children:[e.jsx("input",{id:a("dissatisfiedReaction"),type:"radio",value:a("dissatisfiedReaction"),className:"sr-only",onClick:()=>c(i.DISSATISFIED),onKeyDown:s=>{(s.key==="Enter"||s.key===" ")&&c(i.DISSATISFIED)}}),e.jsxs("label",{htmlFor:a("dissatisfiedReaction"),children:[e.jsx("span",{className:"sr-only","aria-describedby":a("dissatisfiedReaction"),children:a("dissatisfiedReaction")}),n.reaction===i.DISSATISFIED?e.jsx(o,{src:"images/face-tired-filled.svg",alt:a("dissatisfiedReaction")}):e.jsx(o,{src:"images/face-tired.svg",alt:a("dissatisfiedReaction")})]})]}),e.jsxs("div",{children:[e.jsx("input",{id:a("neutralReaction"),type:"radio",value:a("neutralReaction"),className:"sr-only",onClick:()=>c(i.NEUTRAL),onKeyDown:s=>{(s.key==="Enter"||s.key===" ")&&c(i.NEUTRAL)}}),e.jsxs("label",{htmlFor:a("neutralReaction"),children:[e.jsx("span",{className:"sr-only","aria-describedby":a("neutralReaction"),children:a("neutralReaction")}),n.reaction===i.NEUTRAL?e.jsx(o,{src:"images/face-meh-filled.svg",alt:a("neutralReaction")}):e.jsx(o,{src:"images/face-meh.svg",alt:a("neutralReaction")})]})]}),e.jsxs("div",{children:[e.jsx("input",{id:a("satisfiedReaction"),type:"radio",value:a("satisfiedReaction"),className:"sr-only",onClick:()=>c(i.SATISFIED),onKeyDown:s=>{(s.key==="Enter"||s.key===" ")&&c(i.SATISFIED)}}),e.jsxs("label",{htmlFor:a("satisfiedReaction"),children:[e.jsx("span",{className:"sr-only","aria-describedby":a("satisfiedReaction"),children:a("satisfiedReaction")}),n.reaction===i.SATISFIED?e.jsx(o,{src:"images/face-heart-filled.svg",alt:a("satisfiedReaction")}):e.jsx(o,{src:"images/face-grin-hearts.svg",alt:a("satisfiedReaction")})]})]})]})]}),e.jsx(E,{className:"feedback-text-area",label:a("textAreaLabel"),placeholder:a("textAreaPlaceHolder"),maxlength:200,value:n.comment,onChange:I}),e.jsxs("div",{className:"counter",children:[p,"/200"]})]})})})};export{F};
